generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model user {
  id       Int     @id @default(autoincrement())
  name     String
  email    String  @unique
  password String
  phone    String?
}

model admin {
  id       Int     @id @default(autoincrement())
  adminId  String  @unique
  password String
}
model Order {
  id                 Int          @id @default(autoincrement())
  firstName          String
  lastName           String
  email              String
  phone              String
  address            String
  city               String
  state              String
  pincode            String
  paymentMethod      String
  totalAmount        Int          // stored in paise
  items              OrderItem[]
  createdAt          DateTime     @default(now())
  status             String       @default("processing") // processing, shipped, delivered

  razorpayOrderId    String?      @unique // must be unique
  razorpayPaymentId  String?     
  razorpaySignature  String?     
  paymentStatus      String       @default("pending")
}

model OrderItem {
  id       Int    @id @default(autoincrement())
  name     String
  quantity Int
  price    Int    // stored in paise
  order    Order  @relation(fields: [orderId], references: [id], onDelete: Cascade)
  orderId  Int
}

model Product {
  id            Int      @id @default(autoincrement())
  name          String
  description   String
  price         Float
  imageUrl      String
  stockQuantity Int      
  createdAt     DateTime @default(now())
}

model StudentDiscount {
  id           Int      @id @default(autoincrement())
  studentName  String
  academicYear String
  studentId    String   // Student ID or Institute Name
  createdAt    DateTime @default(now())
}
